Проходимся bfs и жадно красим  
Для каждой вершины список свободных цветов  
Когда красим вершину — убираем из всех соседей текущий цвет